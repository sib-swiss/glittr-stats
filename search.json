[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Glittr stats",
    "section": "",
    "text": "In this report you can find some general statistics about Glittr.org. The plots and statistics created are amongst others used in the manuscript. Since Glittr.org is an ongoing project these statistics are updated weekly."
  },
  {
    "objectID": "index.html#set-up-the-environment",
    "href": "index.html#set-up-the-environment",
    "title": "Glittr stats",
    "section": "Set up the environment",
    "text": "Set up the environment\nThis is required if you run this notebook locally. Loading required packages.\n\nlibrary(httr2)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(ggbreak)\nlibrary(cowplot)\nlibrary(downlit)\nlibrary(xml2)\n\nTo run locally, create a file named .env and add your GitHub PAT (variable named PAT ) and google api key (named GOOGLE_API_KEY) in there, e.g.:\n\n# this is an example, store it as .env:\nexport PAT=\"ghp_aRSRESCTZII20Lklser3H\"\nexport GOOGLE_API_KEY=\"AjKSLE5SklxuRsxwPP8s0\"\n\nNow use your UNIX terminal to source this file to get the keys as objects:\n\nsource .env\n\nIn R, get environment variables as objects:\n\npat &lt;- Sys.getenv(\"PAT\")\ngoogle_api_key &lt;- Sys.getenv(\"GOOGLE_API_KEY\")\n\nSetting colors. These correspond to the category colours on glittr.org.\n\nglittr_cols &lt;- c(\n  \"Scripting and languages\" =             \"#3a86ff\",\n  \"Computational methods and pipelines\" = \"#fb5607\",\n  \"Omics analysis\" =                      \"#ff006e\",\n  \"Reproducibility and data management\" = \"#ffbe0b\",\n  \"Statistics and machine learning\" =     \"#8338ec\",\n  \"Others\" =                              \"#000000\")"
  },
  {
    "objectID": "index.html#parse-repository-data",
    "href": "index.html#parse-repository-data",
    "title": "Glittr stats",
    "section": "Parse repository data",
    "text": "Parse repository data\nUsing the glittr.org REST API to get repository metadata, among which the stargazers, recency, category, license and tags.\n\nCode# get all repositories content as nested list\nparsed &lt;- request(\"https://glittr.org/api/repositories\") |&gt;\n  req_perform() |&gt;\n  resp_body_json()\n\n# extract relevant items as dataframe\nrepo_info_list &lt;- lapply(parsed$data, function(x) data.frame(\n  repo = x$name,\n  author_name = x$author$name,\n  stargazers = x$stargazers,\n  recency = x$days_since_last_push,\n  url = x$url,\n  license = ifelse(is.null(x$license), \"none\", x$license),\n  main_tag = x$tags[[1]]$name,\n  main_category = x$tags[[1]]$category\n))\n\nrepo_info &lt;- do.call(rbind, repo_info_list)\n\n# create a column with provider (either github or gitlab)\nrepo_info$provider &lt;- ifelse(grepl(\"github\", repo_info$url), \"github\", \"gitlab\")\n\n# create a factor for categories for sorting\nrepo_info$main_category &lt;- factor(repo_info$main_category,\n                                  levels = names(glittr_cols))\n\n# category table to keep order the same in the plots\ncat_table &lt;- table(category = repo_info$main_category)\ncat_table &lt;- sort(cat_table)\n\n\nNumber of repositories: 638"
  },
  {
    "objectID": "index.html#get-contributors-info",
    "href": "index.html#get-contributors-info",
    "title": "Glittr stats",
    "section": "Get contributors info",
    "text": "Get contributors info\nUsing the GitHub REST API to get the number of contributors for each repository on glittr.org. This takes a few minutes, so if the contributors haven’t changed, it will use a cached version.\n\nCode# take long time to run, so try to use cache results if no repos have been \n# added in the meantime\n\n# check if data/n_contributors.rds exists\nif(file.exists(\"data/n_contributors.rds\")) {\n  n_contributors &lt;- readRDS(\"data/n_contributors.rds\")\n} else {\n  n_contributors &lt;- NULL\n}\n\n# get contributors info only from github repos\nrepo_info_gh &lt;- repo_info[repo_info$provider == \"github\", ]\n\n# get contributor info from github api if update is needed\nif(!identical(sort(repo_info_gh$repo), sort(names(n_contributors)))) {\n  dir.create(\"data\", showWarnings = FALSE)\n  n_contributors &lt;- sapply(repo_info_gh$repo, function(x) {\n    \n    # get repo contributors\n    resp &lt;- request(\"https://api.github.com/repos/\") |&gt;\n      req_url_path_append(x) |&gt;\n      req_url_path_append(\"contributors\") |&gt;\n      req_url_query(per_page = 1) |&gt;\n      req_headers(\n        Accept = \"application/vnd.github+json\",\n        Authorization = paste(\"Bearer\", pat),\n        `X-GitHub-Api-Version` = \"2022-11-28\",\n      ) |&gt;\n      req_perform() \n    \n    link_url &lt;- resp_link_url(resp, \"last\")\n    if(is.null(link_url)) {\n      return(1)\n    } else {\n      npages &lt;- strsplit(link_url, \"&page=\")[[1]][2] |&gt; as.numeric()\n      return(npages)\n    }\n  })\n  \n  # overwrite rds file\n  saveRDS(n_contributors, \"data/n_contributors.rds\")\n}\n\nrepo_info_gh$contributors &lt;- n_contributors[repo_info_gh$repo]"
  },
  {
    "objectID": "index.html#get-country-information",
    "href": "index.html#get-country-information",
    "title": "Glittr stats",
    "section": "Get country information",
    "text": "Get country information\nHere we get country information for all authors and organizations. It uses the free text specified at ‘location’. Since this can be anything, we use the google REST API to translate that into country.\n\nCode# check whether author info exists for caching\nif(file.exists(\"data/author_info.rds\")) {\n  author_info &lt;- readRDS(\"data/author_info.rds\")\n  author_info_authors &lt;- unique(author_info$author) |&gt; sort()\n} else {\n  author_info_authors &lt;- NULL\n}\n\ngh_authors &lt;- repo_info$author_name[repo_info$provider == \"github\"] |&gt;\n  unique() |&gt;\n  sort()\n\n# if the author info is out of date, update it\nif(!identical(gh_authors, author_info_authors)) {\n  author_info_list &lt;- list()\n  for(author in gh_authors) {\n    \n    parsed &lt;- request(\"https://api.github.com/users/\") |&gt;\n      req_url_path_append(author) |&gt;\n      req_headers(\n        Accept = \"application/vnd.github+json\",\n        Authorization = paste(\"Bearer\", pat),\n        `X-GitHub-Api-Version` = \"2022-11-28\",\n      ) |&gt;\n      req_perform() |&gt;\n      resp_body_json()\n    \n    author_info_list[[author]] &lt;- data.frame(\n      author = parsed$login,\n      type = parsed$type,\n      name = ifelse(is.null(parsed$name), NA, parsed$name),\n      location = ifelse(is.null(parsed$location), NA, parsed$location)\n    )\n  }\n  \n  author_info &lt;- do.call(rbind, author_info_list)\n  \n  author_info_loc &lt;- author_info[!is.na(author_info$location), ]\n  \n  author_loc &lt;- author_info_loc$location\n  names(author_loc) &lt;- author_info_loc$author\n  \n  ggmap::register_google(key = google_api_key)\n  loc_info &lt;- ggmap::geocode(author_loc,\n                             output = 'all')\n  \n  get_country &lt;- function(loc_results) {\n    if(\"results\" %in% names(loc_results)) {\n      for(results in loc_results$results) {\n        address_info &lt;- results$address_components |&gt; \n          lapply(unlist) |&gt; \n          do.call(rbind, args = _) |&gt;\n          as.data.frame()\n        country &lt;- address_info$long_name[address_info$types1 == \"country\"]\n        if (length(country) == 0) next\n      }\n      if (length(country) == 0) return(NA)\n      return(country)\n    } else {\n      return(NA)\n    }\n  }\n  \n  countries &lt;- sapply(loc_info, get_country)\n  names(countries) &lt;- names(author_loc)\n  \n  author_info$country &lt;- countries[author_info$author]\n  \n  saveRDS(author_info, \"data/author_info.rds\")\n}\n\nrepo_info &lt;- merge(repo_info, author_info, by.x = \"author_name\",\n                   by.y = \"author\")\nrepo_info$country[is.na(repo_info$country)] &lt;- \"undefined\"\n\n\n\nNumber of authors: 305\nNumber of countries: 26"
  },
  {
    "objectID": "index.html#parse-tag-data",
    "href": "index.html#parse-tag-data",
    "title": "Glittr stats",
    "section": "Parse tag data",
    "text": "Parse tag data\nHere, we create tag_df that contains information for each tag by using the glittr.org API.\n\nparsed &lt;- request(\"https://glittr.org/api/tags\") |&gt;\n  req_perform() |&gt;\n  resp_body_json()\n\ntag_dfs &lt;- list()\nfor(i in seq_along(parsed)) {\n  category &lt;- parsed[[i]]$category\n  name &lt;- sapply(parsed[[i]]$tags, function(x) x$name)\n  repositories &lt;- sapply(parsed[[i]]$tags, function(x) x$repositories)\n  tag_dfs[[category]] &lt;- data.frame(name, category, repositories)\n}\n\ntag_df &lt;- do.call(rbind, tag_dfs) |&gt; arrange(repositories)\n\nNumber of tags/topics: 58"
  },
  {
    "objectID": "index.html#number-of-repositories-by-category",
    "href": "index.html#number-of-repositories-by-category",
    "title": "Glittr stats",
    "section": "Number of repositories by category",
    "text": "Number of repositories by category\nThis is figure 2A in the manuscript.\n\ncat_count_plot &lt;- table(category = repo_info$main_category) |&gt;\n  as.data.frame() |&gt;\n  ggplot(aes(x = reorder(category, Freq), y = Freq, fill = category)) +\n  geom_bar(stat = \"identity\") +\n  scale_fill_manual(values = glittr_cols) +\n  coord_flip() +\n  theme_classic() +\n  ggtitle(\"Categories\") +\n  theme(legend.position = \"none\",\n        axis.title.y = element_blank()) +\n  ylab(\"Number of repositories\")\n\nprint(cat_count_plot)\n\n\n\n\n\n\nFigure 1: Number of repositories per category\n\n\n\n\nAnd a table with the actual numbers\n\ncategory_count &lt;- table(category = repo_info$main_category) |&gt; as.data.frame()\nknitr::kable(category_count)\n\n\nTable 1: Number of repositories per category\n\n\n\n\ncategory\nFreq\n\n\n\nScripting and languages\n345\n\n\nComputational methods and pipelines\n64\n\n\nOmics analysis\n100\n\n\nReproducibility and data management\n58\n\n\nStatistics and machine learning\n42\n\n\nOthers\n27"
  },
  {
    "objectID": "index.html#number-of-contributors-per-repository-separated-by-category",
    "href": "index.html#number-of-contributors-per-repository-separated-by-category",
    "title": "Glittr stats",
    "section": "Number of contributors per repository separated by category",
    "text": "Number of contributors per repository separated by category\nThis is figure 2B in the manuscript.\n\nrepo_info_gh$main_category &lt;- factor(repo_info_gh$main_category,\n                                     levels = names(cat_table))\n\ncontributors_plot &lt;- repo_info_gh |&gt;\n  ggplot(aes(x = main_category, y = contributors, fill = main_category)) +\n  geom_violin(scale = \"width\") +\n  geom_boxplot(width = 0.1, col = \"darkgrey\") +\n  coord_flip() +\n  ggtitle(\"Contributors\") +\n  ylab(\"Number of contributors\") +\n  scale_y_sqrt() +\n  scale_fill_manual(values = glittr_cols) +\n  theme_bw() +\n  theme(legend.position = \"none\",\n        axis.title.y = element_blank(),\n        plot.margin = margin(t = 5, r = 10, b = 5, l = 10))\n\nprint(contributors_plot)\n\n\n\n\n\n\nFigure 2: Number of contributors per repository separated by category\n\n\n\n\nAnd some statistics of contributors.\n\nnna_contr &lt;- repo_info_gh$contributors\nparam1 &lt;- sum(nna_contr &gt; 10)/length(nna_contr)\nparam2 &lt;- sum(nna_contr &gt; 1)/length(nna_contr)\nparam3 &lt;- sum(nna_contr &lt;= 5)/length(nna_contr)\n\n\nMore than 10 contributors: 25.5%\nMore than 1 contributor: 80.3%\nBetween 1 and 5 contributors: 59%"
  },
  {
    "objectID": "index.html#number-of-repositories-per-tag",
    "href": "index.html#number-of-repositories-per-tag",
    "title": "Glittr stats",
    "section": "Number of repositories per tag",
    "text": "Number of repositories per tag\nThis is figure 2C in the manuscript.\n\ntag_freq_plot &lt;- tag_df |&gt;\n  filter(repositories &gt; 10) |&gt;\n  ggplot(aes(x = reorder(name, repositories),\n             y = repositories, fill = category)) +\n  geom_bar(stat = \"identity\") +\n  coord_flip() +\n  scale_fill_manual(values = glittr_cols) +\n  ggtitle(\"Tags with &gt; 10 repositories\") +\n  ylab(\"Number of repositories\") +\n  annotate(geom = \"text\", x = 2, y = 150,\n           label = paste(\"Total number of tags: \",\n                         nrow(tag_df)),\n           color=\"black\") +\n  theme_classic() +\n  theme(legend.position = \"none\",\n        axis.title.y = element_blank())\n\nprint(tag_freq_plot)\n\n\n\n\n\n\nFigure 3: Number of repostories per tag, colored by category.\n\n\n\n\nAnd a table with the actual numbers.\n\ntag_df |&gt;\n  filter(repositories &gt; 10) |&gt;\n  arrange(desc(repositories)) |&gt;\n  knitr::kable(row.names = FALSE)\n\n\nTable 2: Number of repositories per tag\n\n\n\n\n\n\n\n\n\nname\ncategory\nrepositories\n\n\n\nR\nScripting and languages\n251\n\n\nPython\nScripting and languages\n94\n\n\nTranscriptomics\nOmics analysis\n84\n\n\nRNA-seq\nOmics analysis\n80\n\n\nNext generation sequencing\nOmics analysis\n61\n\n\nStatistics\nStatistics and machine learning\n60\n\n\nData science\nStatistics and machine learning\n51\n\n\nGenomics\nOmics analysis\n50\n\n\nMachine learning\nStatistics and machine learning\n48\n\n\nSingle-cell sequencing\nOmics analysis\n47\n\n\nUnix/Linux\nScripting and languages\n40\n\n\nData management\nReproducibility and data management\n39\n\n\nReproducibility\nReproducibility and data management\n39\n\n\nData visualization\nScripting and languages\n33\n\n\nFAIR data\nReproducibility and data management\n32\n\n\nGeneral\nOthers\n32\n\n\nVariant analysis\nOmics analysis\n28\n\n\nVersion control\nScripting and languages\n25\n\n\nWorkflows\nComputational methods and pipelines\n21\n\n\nContainerization\nComputational methods and pipelines\n19\n\n\nMetagenomics\nOmics analysis\n18\n\n\nShiny\nScripting and languages\n17\n\n\nChIP-seq\nOmics analysis\n16\n\n\nDocker\nComputational methods and pipelines\n15\n\n\nJulia\nScripting and languages\n13\n\n\nNextflow\nComputational methods and pipelines\n12\n\n\nATAC-seq\nOmics analysis\n12\n\n\nEpigenetics\nOmics analysis\n12\n\n\nImage analysis\nComputational methods and pipelines\n11"
  },
  {
    "objectID": "index.html#number-of-repositories-by-author",
    "href": "index.html#number-of-repositories-by-author",
    "title": "Glittr stats",
    "section": "Number of repositories by author",
    "text": "Number of repositories by author\nThis is figure 2D in the manuscript.\n\nauthor_freq &lt;- table(author_name = repo_info$author_name, \n                     main_category = repo_info$main_category) |&gt;\n  as.data.frame()\n\nauthor_freq$main_category &lt;- factor(author_freq$main_category,\n                                     levels = names(cat_table))\n\nrepos_per_author &lt;- table(repo_info$author_name)\n\nlf_authors &lt;- names(repos_per_author)[repos_per_author &lt; 5]\n\nauthor_freq_plot &lt;- author_freq |&gt;\n  filter(!author_name %in% lf_authors) |&gt;\n  arrange(Freq) |&gt;\n  ggplot(aes(x = reorder(author_name, Freq), y = Freq, fill = main_category)) +\n  geom_bar(stat = \"identity\") +\n  coord_flip() +\n  ggtitle(\"Author or organization\") +\n  ylab(\"Number of repositories\") +\n  scale_fill_manual(values = glittr_cols) +\n  annotate(geom = \"text\", x = 2, y = 30,\n           label = paste(\"Authors with &lt; 5 repos: \",\n                         length(lf_authors)),\n           color=\"black\") +\n  theme_classic() +\n  theme(legend.position = \"none\",\n        axis.title.y = element_blank())\n\nprint(author_freq_plot)\n\n\n\n\n\n\nFigure 4: Number of repositories per author colored by category\n\n\n\n\nAnd a table with the actual numbers.\n\ntable(repo_info$author_name) |&gt;\n  as.data.frame() |&gt;\n  filter(Freq &gt;= 5) |&gt;\n  arrange(desc(Freq)) |&gt;\n  knitr::kable()\n\n\nTable 3: Number of repositories per author\n\n\n\n\nVar1\nFreq\n\n\n\ncarpentries-incubator\n46\n\n\nsib-swiss\n27\n\n\nNBISweden\n22\n\n\nposit-conf-2023\n20\n\n\nucdavis-bioinformatics-training\n18\n\n\nhbctraining\n17\n\n\ndatacarpentry\n16\n\n\nbioinformaticsdotca\n14\n\n\nbioinformatics-core-shared-training\n13\n\n\nbioinformatics-ca\n10\n\n\nGTPB\n10\n\n\nrstudio-conf-2022\n9\n\n\nfhdsl\n8\n\n\nlearnbyexample\n8\n\n\nRockefellerUniversity\n7\n\n\nbiocorecrg\n6\n\n\nJuliaAcademy\n6\n\n\nsemacu\n6\n\n\nswcarpentry\n6\n\n\ncambiotraining\n5\n\n\ncarpentries-lab\n5\n\n\nhadley\n5\n\n\njhudsl\n5"
  },
  {
    "objectID": "index.html#number-of-repositories-per-license",
    "href": "index.html#number-of-repositories-per-license",
    "title": "Glittr stats",
    "section": "Number of repositories per license",
    "text": "Number of repositories per license\nThis is figure 2E in the manuscript.\n\nlic_freq_data &lt;- table(license = repo_info$license,\n                       main_category = repo_info$main_category) |&gt;\n  as.data.frame()\n\nlic_freq_data$main_category &lt;- factor(lic_freq_data$main_category,\n                                     levels = names(cat_table))\n\nlic_freq_plot &lt;- lic_freq_data |&gt;\n  ggplot(aes(x = reorder(license, Freq), y = Freq, fill = main_category)) +\n  geom_bar(stat = \"identity\") +\n  coord_flip() +\n  scale_fill_manual(values = glittr_cols) +\n  theme_classic() +\n  ggtitle(\"License type\") +\n  ylab(\"Number of repositories\") +\n  theme(legend.position = \"none\",\n        axis.title.y = element_blank())\n\nprint(lic_freq_plot)\n\n\n\n\n\n\nFigure 5: Number of repositories per license\n\n\n\n\nAnd a table with the actual numbers.\n\nrepo_info$license |&gt;\n  table() |&gt;\n  as.data.frame() |&gt;\n  mutate(perc = round(Freq/nrow(repo_info)*100, 1)) |&gt;\n  arrange(desc(Freq)) |&gt;\n  knitr::kable()\n\n\nTable 4: Number of repositories per license\n\n\n\n\nVar1\nFreq\nperc\n\n\n\nother\n222\n34.9\n\n\nnone\n188\n29.6\n\n\nmit\n70\n11.0\n\n\ncc-by-4.0\n40\n6.3\n\n\ncc-by-sa-4.0\n31\n4.9\n\n\ngpl-3.0\n30\n4.7\n\n\ncc0-1.0\n25\n3.9\n\n\napache-2.0\n12\n1.9\n\n\nbsd-3-clause\n12\n1.9\n\n\nagpl-3.0\n2\n0.3\n\n\nartistic-2.0\n2\n0.3\n\n\nunlicense\n1\n0.2\n\n\nwtfpl\n1\n0.2"
  },
  {
    "objectID": "index.html#number-of-repositories-per-country",
    "href": "index.html#number-of-repositories-per-country",
    "title": "Glittr stats",
    "section": "Number of repositories per country",
    "text": "Number of repositories per country\nThis is figure 2F in the mansucript.\n\ncountry_freq &lt;- table(country = repo_info$country, \n                      main_category = repo_info$main_category) |&gt;\n  as.data.frame()\n\ncountry_freq$main_category &lt;- factor(country_freq$main_category,\n                                     levels = names(cat_table))\n\ncountry_freq_plot &lt;- country_freq |&gt;\n  filter(country != \"undefined\") |&gt;\n  ggplot(aes(x = reorder(country, Freq), y = Freq, fill = main_category)) +\n  geom_bar(stat = \"identity\") +\n  coord_flip() +\n  ggtitle(\"Country\") +\n  ylab(\"Number of repositories\") +\n  scale_fill_manual(values = glittr_cols) +\n  annotate(geom = \"text\", x = 2, y = 70,\n           label = paste(\"Repos with undefined country: \",\n                         sum(repo_info$country == \"undefined\")),\n           color=\"black\") +\n  theme_classic() +\n  theme(legend.position = \"none\",\n        axis.title.y = element_blank())\n\nprint(country_freq_plot)\n\n\n\n\n\n\nFigure 6: Number of repositories per country colored by category\n\n\n\n\nAnd a table with the actual numbers.\n\nrepo_info$country |&gt; \n  table() |&gt; \n  as.data.frame() |&gt; \n  arrange(desc(Freq)) |&gt; \n  knitr::kable()\n\n\nTable 5: Number of repositories per country\n\n\n\n\nVar1\nFreq\n\n\n\nundefined\n267\n\n\nUnited States\n155\n\n\nCanada\n31\n\n\nSwitzerland\n30\n\n\nSweden\n23\n\n\nUnited Kingdom\n22\n\n\nAustralia\n15\n\n\nFrance\n14\n\n\nGermany\n14\n\n\nNetherlands\n12\n\n\nPortugal\n11\n\n\nBelgium\n10\n\n\nSpain\n8\n\n\nDenmark\n4\n\n\nNorway\n4\n\n\nIreland\n3\n\n\nItaly\n3\n\n\nBulgaria\n2\n\n\nArgentina\n1\n\n\nChina\n1\n\n\nFinland\n1\n\n\nIndia\n1\n\n\nLuxembourg\n1\n\n\nMexico\n1\n\n\nPoland\n1\n\n\nUkraine\n1"
  },
  {
    "objectID": "index.html#summary-plot",
    "href": "index.html#summary-plot",
    "title": "Glittr stats",
    "section": "Summary plot",
    "text": "Summary plot\nFull figure 2 of the manuscript.\n\np &lt;- plot_grid(cat_count_plot, contributors_plot, \n          tag_freq_plot, author_freq_plot,  \n          lic_freq_plot, country_freq_plot,\n          ncol = 2, labels = LETTERS[1:6],\n          rel_heights = c(2,3,3))\n\nggsave(\"grid_plot_fig2.pdf\", width = 10, height = 10)\nggsave(\"grid_plot_fig2.eps\", width = 10, height = 10)"
  }
]